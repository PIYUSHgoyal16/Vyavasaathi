(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{p8b5:function(e,t,s){"use strict";s.d(t,"a",function(){return m});var n=s("8Y7J"),c=s("HsDr"),r=s("9Aot"),a=s("Rnop"),i=s("o9eT"),o=s("dJr3"),l=s("w13q"),d=s("71eJ"),b=s("SVse");function u(e,t){if(1&e&&(n.Yb(0,"fl-bit",10),n.Yb(1,"fl-text",11),n.cc(2,12),n.Xb(),n.Xb()),2&e){const e=n.rc();n.Gb(1),n.zc("color",e.FontColor.MID)("size",e.TextSize.SMALL)}}function h(e,t){if(1&e&&(n.Yb(0,"fl-text",13),n.cc(1,14),n.Xb()),2&e){const e=n.rc();n.zc("color",e.FontColor.MID)}}function f(e,t){if(1&e){const e=n.Zb();n.Yb(0,"fl-icon",18),n.nc("click",function(){return n.Qc(e),n.rc(2).selectUser.emit()}),n.Xb()}if(2&e){const e=n.rc(2);n.zc("name","ui-plus-thin")("color",e.IconColor.PRIMARY)("size",e.IconSize.SMALL)}}function g(e,t){if(1&e){const e=n.Zb();n.Yb(0,"fl-icon",19),n.nc("click",function(){return n.Qc(e),n.rc(2).deselectUser.emit()}),n.Xb()}if(2&e){const e=n.rc(2);n.zc("name","ui-tick")("color",e.IconColor.SUCCESS)("size",e.IconSize.SMALL)}}function p(e,t){if(1&e&&(n.Yb(0,"fl-bit",15),n.ad(1,f,1,3,"fl-icon",16),n.ad(2,g,1,3,"ng-template",null,17,n.bd),n.Xb()),2&e){const e=n.Nc(3),t=n.rc();n.Gb(1),n.zc("ngIf",!t.isUserSelected)("ngIfElse",e)}}const C=function(e){return[e]};let m=(()=>{class e{constructor(){this.FontColor=a.a,this.IconColor=c.c,this.IconSize=c.e,this.Margin=r.a,this.TextSize=i.f,this.UsernameSize=o.c,this.showAddButton=!1,this.isLoggedInUser=!1,this.isUserSelected=!1,this.showCtas=!0,this.showSubtitle=!0,this.deselectUser=new n.n,this.selectUser=new n.n}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Mb({type:e,selectors:[["app-messaging-contact-item"]],inputs:{user:"user",isLoggedInUser:"isLoggedInUser",isUserSelected:"isUserSelected",showCtas:"showCtas",showSubtitle:"showSubtitle"},outputs:{deselectUser:"deselectUser",selectUser:"selectUser"},decls:10,vars:12,consts:function(){let e,t;return e=" (You) ",t=" Active now ",[[1,"MessagingContactItem-avatar"],[3,"flMarginRight","users"],[1,"MessagingContactItem-content"],[1,"MessagingContactItem-content-userDetails",3,"flMarginRight"],[1,"MessagingContactItem-content-username-row"],[1,"MessagingContactItem-content-username-container"],[1,"MessagingContactItem-content-username",3,"displayName","username","size","truncateText"],["class","MessagingContactItem-content-loggedInUser",4,"ngIf"],[3,"color",4,"ngIf"],["class","MessagingContactItem-content-cta",4,"ngIf"],[1,"MessagingContactItem-content-loggedInUser"],[3,"color","size"],e,[3,"color"],t,[1,"MessagingContactItem-content-cta"],["flTrackingLabel","SelectUserButtonCta",3,"name","color","size","click",4,"ngIf","ngIfElse"],["deselectCta",""],["flTrackingLabel","SelectUserButtonCta",3,"name","color","size","click"],["flTrackingLabel","DeselectUserButtonCta",3,"name","color","size","click"]]},template:function(e,t){1&e&&(n.Yb(0,"fl-bit",0),n.Tb(1,"fl-user-avatar",1),n.Xb(),n.Yb(2,"fl-bit",2),n.Yb(3,"fl-bit",3),n.Yb(4,"fl-bit",4),n.Yb(5,"fl-bit",5),n.Tb(6,"fl-username",6),n.Xb(),n.ad(7,u,3,2,"fl-bit",7),n.Xb(),n.ad(8,h,2,1,"fl-text",8),n.Xb(),n.ad(9,p,4,2,"fl-bit",9),n.Xb()),2&e&&(n.Gb(1),n.zc("flMarginRight",t.Margin.SMALL)("users",n.Ec(10,C,t.user)),n.Gb(2),n.zc("flMarginRight",t.showCtas?t.Margin.SMALL:t.Margin.NONE),n.Gb(3),n.zc("displayName",t.user.displayName)("username",t.user.username)("size",t.UsernameSize.LARGE)("truncateText",!0),n.Gb(1),n.zc("ngIf",t.isLoggedInUser),n.Gb(1),n.zc("ngIf",t.showSubtitle),n.Gb(1),n.zc("ngIf",t.showCtas))},directives:[l.a,d.b,r.b,o.b,b.q,i.e,c.d],styles:["[_nghost-%COMP%]{align-items:center;display:flex}.MessagingContactItem-avatar[_ngcontent-%COMP%]{position:relative}.MessagingContactItem-content[_ngcontent-%COMP%]{align-items:center;display:flex;flex:1 1 0%;overflow:hidden}.MessagingContactItem-content-userDetails[_ngcontent-%COMP%]{flex:1 1 0%;min-width:0}.MessagingContactItem-content-username[_ngcontent-%COMP%]{flex-wrap:nowrap;width:50%}.MessagingContactItem-content-username-row[_ngcontent-%COMP%]{display:flex}.MessagingContactItem-content-username-container[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;flex:1 1 0%;padding-right:4px}.MessagingContactItem-content-loggedInUser[_ngcontent-%COMP%]{align-items:flex-end}.MessagingContactItem-content-cta[_ngcontent-%COMP%]{align-items:flex-end;cursor:pointer;display:flex;flex-direction:column}"],changeDetection:0}),e})()},v5ZQ:function(e,t,s){"use strict";s.d(t,"a",function(){return v});var n=s("8Y7J"),c=s("B23V"),r=s("dO68"),a=s("9Aot"),i=s("Rnop"),o=s("o9eT"),l=s("2Vo4"),d=s("itXk"),b=s("/uUt"),u=s("pLZG"),h=s("lJxs"),f=s("JX91"),g=s("eCtd"),p=s("LLeR"),C=s("SVse"),m=s("HLWz"),S=s("KtYJ"),U=s("/zj7"),M=s("p8b5");const x=["flListItem"];function I(e,t){if(1&e){const e=n.Zb();n.Yb(0,"fl-list-item"),n.Yb(1,"app-messaging-contact-item",7),n.nc("selectUser",function(){n.Qc(e);const s=t.$implicit;return n.rc(2).selectUser.emit(s)})("deselectUser",function(){n.Qc(e);const s=t.$implicit;return n.rc(2).deselectUser.emit(s)}),n.Xb(),n.Xb()}if(2&e){const e=t.$implicit,s=n.rc(2);n.Gb(1),n.zc("user",e)("isUserSelected",s.selectedUsers.has(e))}}function z(e,t){if(1&e&&(n.Yb(0,"fl-list-item-body"),n.Yb(1,"fl-list",5),n.ad(2,I,2,2,"fl-list-item",6),n.Xb(),n.Xb()),2&e){const e=n.rc();n.Gb(1),n.zc("outerPadding",!1)("padding",e.ListItemPadding.SMALL)("type",e.ListItemType.NON_BORDERED),n.Gb(1),n.zc("ngForOf",e.users)}}const T=["*"];let A=(()=>{class e{constructor(){this.FontColor=i.a,this.ListItemPadding=S.e,this.ListItemType=S.f,this.Margin=a.a,this.TextSize=o.f,this.TextTransform=o.g,this.deselectUser=new n.n,this.selectUser=new n.n}ngOnChanges(e){"users"in e&&this.users&&this.listItemComponent&&this.listItemComponent.changeDetectorRef.markForCheck()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Mb({type:e,selectors:[["app-messaging-add-people-section"]],viewQuery:function(e,t){if(1&e&&n.jd(x,1),2&e){let e;n.Mc(e=n.oc())&&(t.listItemComponent=e.first)}},inputs:{users:"users",selectedUsers:"selectedUsers"},outputs:{deselectUser:"deselectUser",selectUser:"selectUser"},features:[n.Eb],ngContentSelectors:T,decls:8,vars:8,consts:function(){let e;return e="" + "\ufffd#6\ufffd" + "" + "\ufffd/#6\ufffd" + " (" + "\ufffd0\ufffd" + ") ",[[3,"clickable","expandable","padding"],["flListItem",""],[3,"textTransform","color","size"],e,[4,"ngIf"],[3,"outerPadding","padding","type"],[4,"ngFor","ngForOf"],[3,"user","isUserSelected","selectUser","deselectUser"]]},template:function(e,t){1&e&&(n.yc(),n.Yb(0,"fl-list",0),n.Yb(1,"fl-list-item",null,1),n.Yb(3,"fl-list-item-header"),n.Yb(4,"fl-text",2),n.ic(5,3),n.xc(6),n.fc(),n.Xb(),n.Xb(),n.ad(7,z,3,4,"fl-list-item-body",4),n.Xb(),n.Xb()),2&e&&(n.zc("clickable",!0)("expandable",!0)("padding",t.ListItemPadding.SMALL),n.Gb(4),n.zc("textTransform",t.TextTransform.UPPERCASE)("color",t.FontColor.MID)("size",t.TextSize.XXXSMALL),n.Gb(2),n.gc(t.users?t.users.length:0),n.dc(5),n.Gb(1),n.zc("ngIf",(null==t.users?null:t.users.length)>0))},directives:[U.a,S.b,S.c,o.e,C.q,S.a,C.p,M.a],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0}),e})();var y=s("wZbG"),L=s("w13q"),w=s("al+g");const $=["flSearch"];function P(e,t){1&e&&(n.Wb(0),n.cc(1,16),n.Vb())}function O(e,t){1&e&&(n.Wb(0),n.cc(1,17),n.Vb())}function _(e,t){1&e&&(n.Wb(0),n.cc(1,18),n.Vb())}function k(e,t){1&e&&(n.Wb(0),n.cc(1,19),n.Vb())}function B(e,t){if(1&e&&(n.Yb(0,"fl-text",15),n.sc(1,"flAsync"),n.ad(2,P,2,0,"ng-container",4),n.sc(3,"flAsync"),n.sc(4,"flAsync"),n.ad(5,O,2,0,"ng-container",4),n.sc(6,"flAsync"),n.sc(7,"flAsync"),n.ad(8,_,2,0,"ng-container",4),n.sc(9,"flAsync"),n.sc(10,"flAsync"),n.sc(11,"flAsync"),n.sc(12,"flAsync"),n.ad(13,k,2,0,"ng-container",4),n.sc(14,"flAsync"),n.sc(15,"flAsync"),n.sc(16,"flAsync"),n.sc(17,"flAsync"),n.Xb()),2&e){const e=n.rc();let t=null,s=null;n.zc("size",e.TextSize.XXSMALL)("color",n.tc(1,6,e.candidateUserSearchError$)?e.FontColor.ERROR:e.FontColor.MID),n.Gb(2),n.zc("ngIf",!!n.tc(3,8,e.candidateUserSearchError$)&&n.tc(4,10,e.backendUserSearchText$)),n.Gb(3),n.zc("ngIf",!n.tc(6,12,e.candidateUserSearchLoaded$)&&n.tc(7,14,e.backendUserSearchText$)),n.Gb(3),n.zc("ngIf",0===(null==(t=n.tc(9,16,e.candidateUserSearch$))?null:t.length)&&!n.tc(10,18,e.candidateUserSearchError$)&&n.tc(11,20,e.candidateUserSearchLoaded$)&&n.tc(12,22,e.backendUserSearchText$)),n.Gb(5),n.zc("ngIf",(!n.tc(14,24,e.backendUserSearchText$)||(null==(s=n.tc(15,26,e.candidateUserSearch$))?null:s.length)>0)&&!n.tc(16,28,e.candidateUserSearchError$)&&n.tc(17,30,e.candidateUserSearchLoaded$))}}function X(e,t){if(1&e){const e=n.Zb();n.Wb(0),n.Yb(1,"app-messaging-add-people-section",5),n.nc("selectUser",function(t){return n.Qc(e),n.rc().selectUser(t)})("deselectUser",function(t){return n.Qc(e),n.rc().deselectUser(t)}),n.cc(2,20),n.sc(3,"flAsync"),n.Xb(),n.Tb(4,"fl-hr",7),n.Vb()}if(2&e){const e=n.rc();n.Gb(1),n.zc("users",n.tc(3,2,e.candidateUserSearch$))("selectedUsers",e.selectedUsers)}}const G=function(e){return{"MessagingAddPeople-ctaContainer--fullInbox":e}},Y=function(e){return{"MessagingAddPeople-button--fullInbox":e}};let v=(()=>{class e{constructor(e){this.datastore=e,this.ButtonColor=c.a,this.ButtonSize=r.a,this.FontColor=i.a,this.Margin=a.a,this.TextSize=o.f,this.chatboxMode=!0,this.hideAddPeopleScreen=new n.n,this.addChatMembers=new n.n,this._searchTextSubject$=new l.a(""),this.searchText$=this._searchTextSubject$.asObservable(),this._backendUserSearchTextSubject$=new l.a(""),this.backendUserSearchText$=this._backendUserSearchTextSubject$.asObservable(),this.selectedUsers=new Set}ngOnInit(){this.searchTextSubscription=this.searchText$.subscribe(e=>{this.filteredThreadBidders=this.filterCandidatesBySearchTerm(this.threadBidders,e),this.filteredThreadCollaborators=this.filterCandidatesBySearchTerm(this.threadCollaborators,e),this.filteredContacts=this.filterCandidatesBySearchTerm(this.threadContacts,e)}),this.candidateUsersCollection=this.datastore.collection("users",e=>e.limit(1).where("username","equalsIgnoreCase",this.backendUserSearchText$.pipe(Object(b.a)(),Object(u.a)(e=>""!==e)))),this.candidateUserSearchLoaded$=this.candidateUsersCollection.status$.pipe(Object(h.a)(e=>e.ready),Object(f.a)(!0)),this.candidateUserSearchError$=this.candidateUsersCollection.status$.pipe(Object(h.a)(e=>e.error),Object(f.a)(void 0)),this.candidateUserSearch$=d.a([this.candidateUsersCollection.valueChanges(),this.backendUserSearchText$,this.candidateUserSearchLoaded$]).pipe(Object(h.a)(([e,t,s])=>""!==t&&s?e:[]))}ngOnDestroy(){var e;null===(e=this.searchTextSubscription)||void 0===e||e.unsubscribe()}ngOnChanges(e){"threadBidders"in e&&this.threadBidders&&(this.filteredThreadBidders=this.filterCandidatesBySearchTerm(this.threadBidders,this._searchTextSubject$.value)),"threadCollaborators"in e&&this.threadCollaborators&&(this.filteredThreadCollaborators=this.filterCandidatesBySearchTerm(this.threadCollaborators,this._searchTextSubject$.value)),"threadContacts"in e&&this.threadContacts&&(this.filteredContacts=this.filterCandidatesBySearchTerm(this.threadContacts,this._searchTextSubject$.value))}selectUser(e){this.selectedUsers.add(e)}deselectUser(e){this.selectedUsers.delete(e)}hideAddPeople(){this.hideAddPeopleScreen.emit(),this.clearSelectedUsers()}filterUsersCandidate(e){this._searchTextSubject$.next(e.toLowerCase().trim()),""===e&&this.isLoggedInUserSupportAgent&&this._backendUserSearchTextSubject$.next("")}addMembers(){this.selectedUsers.size>0&&(this.addChatMembers.emit(Array.from(this.selectedUsers.values()).map(e=>e.id)),this.clearSelectedUsers())}clearSelectedUsers(){this.selectedUsers.clear()}clearSearchUser(){this._searchTextSubject$.next(""),this._backendUserSearchTextSubject$.next("")}userSearchByUsername(){this.isLoggedInUserSupportAgent&&this._backendUserSearchTextSubject$.next(this._searchTextSubject$.value)}filterCandidatesBySearchTerm(e,t){return e.filter(e=>e.displayName.toLowerCase().includes(t)||e.username.toLowerCase().includes(t))}}return e.\u0275fac=function(t){return new(t||e)(n.Sb(g.a))},e.\u0275cmp=n.Mb({type:e,selectors:[["app-messaging-add-people"]],viewQuery:function(e,t){if(1&e&&n.jd($,3),2&e){let e;n.Mc(e=n.oc())&&(t.searchComponent=e.first)}},inputs:{chatboxMode:"chatboxMode",isLoggedInUserSupportAgent:"isLoggedInUserSupportAgent",threadBidders:"threadBidders",threadCollaborators:"threadCollaborators",threadContacts:"threadContacts"},outputs:{hideAddPeopleScreen:"hideAddPeopleScreen",addChatMembers:"addChatMembers"},features:[n.Eb],decls:18,vars:23,consts:function(){let e,t,s,n,c,r,a,i,o,l;return e=" Contacts ",t=" Bidders ",s=" Collaborators ",n=" Go back ",c=" Add ",r=" Something went wrong while searching for this user. ",a=" Searching... ",i=" No user found. ",o=" Press Enter to search for users by username. ",l=" Search ",[[3,"query","submit"],["flSearch",""],["class","MessagingAddPeople-searchStatus",3,"size","color",4,"ngIf"],[1,"MessagingAddPeople-sections"],[4,"ngIf"],[3,"users","selectedUsers","selectUser","deselectUser"],e,[1,"MessagingAddPeople-divider"],t,s,[1,"MessagingAddPeople-ctaContainer",3,"ngClass"],["flTrackingLabel","AddPeopleBackButton",1,"MessagingAddPeople-button",3,"ngClass","color","flMarginRight","size","click"],n,["flTrackingLabel","ModifyMembersButton",1,"MessagingAddPeople-button",3,"ngClass","color","size","disabled","click"],c,[1,"MessagingAddPeople-searchStatus",3,"size","color"],r,a,i,o,l]},template:function(e,t){1&e&&(n.Yb(0,"fl-search",0,1),n.nc("query",function(e){return t.filterUsersCandidate(e)})("submit",function(){return t.userSearchByUsername()}),n.Xb(),n.ad(2,B,18,32,"fl-text",2),n.Yb(3,"fl-scrollable-content",3),n.ad(4,X,5,4,"ng-container",4),n.Yb(5,"app-messaging-add-people-section",5),n.nc("selectUser",function(e){return t.selectUser(e)})("deselectUser",function(e){return t.deselectUser(e)}),n.cc(6,6),n.Xb(),n.Tb(7,"fl-hr",7),n.Yb(8,"app-messaging-add-people-section",5),n.nc("selectUser",function(e){return t.selectUser(e)})("deselectUser",function(e){return t.deselectUser(e)}),n.cc(9,8),n.Xb(),n.Tb(10,"fl-hr",7),n.Yb(11,"app-messaging-add-people-section",5),n.nc("selectUser",function(e){return t.selectUser(e)})("deselectUser",function(e){return t.deselectUser(e)}),n.cc(12,9),n.Xb(),n.Xb(),n.Yb(13,"fl-bit",10),n.Yb(14,"fl-button",11),n.nc("click",function(){return t.hideAddPeople()}),n.cc(15,12),n.Xb(),n.Yb(16,"fl-button",13),n.nc("click",function(){return t.addMembers()}),n.cc(17,14),n.Xb(),n.Xb()),2&e&&(n.Gb(2),n.zc("ngIf",t.isLoggedInUserSupportAgent),n.Gb(2),n.zc("ngIf",t.isLoggedInUserSupportAgent),n.Gb(1),n.zc("users",t.filteredContacts)("selectedUsers",t.selectedUsers),n.Gb(3),n.zc("users",t.filteredThreadBidders)("selectedUsers",t.selectedUsers),n.Gb(3),n.zc("users",t.filteredThreadCollaborators)("selectedUsers",t.selectedUsers),n.Gb(2),n.zc("ngClass",n.Ec(17,G,!t.chatboxMode)),n.Gb(1),n.zc("ngClass",n.Ec(19,Y,!t.chatboxMode))("color",t.ButtonColor.TRANSPARENT_DARK)("flMarginRight",t.Margin.MID)("size",t.ButtonSize.SMALL),n.Gb(2),n.zc("ngClass",n.Ec(21,Y,!t.chatboxMode))("color",t.ButtonColor.SECONDARY)("size",t.ButtonSize.SMALL)("disabled",0===t.selectedUsers.size))},directives:[p.a,C.q,m.a,A,y.a,L.a,C.o,c.b,a.b,o.e],pipes:[w.a],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:calc(100% - 56px)}.MessagingAddPeople-searchStatus[_ngcontent-%COMP%]{padding-left:16px}.MessagingAddPeople-sections[_ngcontent-%COMP%]{flex:1 1 0}.MessagingAddPeople-divider[_ngcontent-%COMP%]{padding:0 16px}.MessagingAddPeople-ctaContainer[_ngcontent-%COMP%]{display:flex;padding:24px}@media (min-width:768px){.MessagingAddPeople-ctaContainer--fullInbox[_ngcontent-%COMP%]{justify-content:flex-end;padding:24px 0}}.MessagingAddPeople-button[_ngcontent-%COMP%]{display:flex;flex-grow:1;justify-content:center}.MessagingAddPeople-button--fullInbox[_ngcontent-%COMP%]{min-width:130px}@media (min-width:768px){.MessagingAddPeople-button--fullInbox[_ngcontent-%COMP%]{display:inline-block;flex-grow:0}}"],changeDetection:0}),e})()}}]);
//# sourceMappingURL=default~app-app-shell-logged-in-routing-module~app-messaging-messaging-chat-groupchat-management-mod~0269c2a4-es2015.5083e29246f07d386892.js.map