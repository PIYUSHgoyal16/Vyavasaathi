(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{"9a83":function(e,t,a){"use strict";a.d(t,"a",function(){return s}),a.d(t,"b",function(){return n}),a.d(t,"c",function(){return c});var i=a("OpNG"),o=a("cUs2"),r=a("ueDg"),d=a("9ioL");function s(){return{defaultOrder:{field:"submitDate",direction:i.a.DESC},fetch:(e,t,a,i)=>({endpoint:"projects/0.1/bids",params:{bids:t,bidders:Object(o.h)(a,"bidderId"),projects:Object(o.h)(a,"projectId"),frontend_bid_statuses:Object(o.h)(a,"frontendBidStatus"),award_statuses:Object(o.h)(a,"awardStatus"),complete_statuses:Object(o.h)(a,"completeStatus"),project_owners:Object(o.h)(a,"projectOwnerId")}}),push:n,set:void 0,update:c,remove:void 0}}function n(e,t){return{endpoint:"projects/0.1/bids/",asFormData:!1,payload:{project_id:t.projectId,bidder_id:t.bidderId,amount:t.amount,period:t.period,milestone_percentage:t.milestonePercentage||50,description:t.description,sponsored:t.sponsored},push:void 0,set:void 0,update:void 0,remove:void 0}}function c(e,t,a){const i=`projects/0.1/bids/${a.id}`;let o,s=!0;switch(t.awardStatus){case r.BidAwardStatusApi.PENDING:o=t.extraForUpdate?{action:d.a.AWARD,work_limit:t.extraForUpdate.workLimit,billing_cycle:t.extraForUpdate.billingCycle,skip_hourly_contract:t.extraForUpdate.skipHourlyContract}:{action:d.a.AWARD};break;case r.BidAwardStatusApi.REVOKED:o={action:d.a.REVOKE};break;case r.BidAwardStatusApi.REJECTED:o={action:d.b.DENY,reason_code:t.rejectReasonCode,other_feedback:t.otherFeedback};break;case r.BidAwardStatusApi.AWARDED:o={action:d.b.ACCEPT}}if(void 0!==t.shortlisted&&t.shortlisted!==a.shortlisted){if(o)throw new Error("Cannot update two requests at once");o=t.shortlisted?{action:d.a.SHORTLIST}:{action:d.a.UNSHORTLIST}}if(void 0!==t.hidden&&t.hidden!==a.hidden){if(o)throw new Error("Cannot update two requests at once");o=t.hidden?{action:d.a.HIDE}:{action:d.a.UNHIDE}}if(void 0!==t.isLocationTracked&&t.isLocationTracked!==a.isLocationTracked){if(o)throw new Error("Cannot update two requests at once");if(!t.isLocationTracked)throw new Error("You cannot update the isLocationTracked to false");o={action:d.a.REQUEST_LOCATION_SHARING}}if(t.highlighted){if(o)throw new Error("Cannot update two requests at once");o={action:d.b.HIGHLIGHT}}if(t.retracted){if(o)throw new Error("Cannot update two requests at once");o={action:d.b.RETRACT}}if(void 0!==t.description||void 0!==t.period||void 0!==t.amount){if(o)throw new Error("Cannot update with action and bid at once");o={description:t.description,period:t.period,amount:t.amount},s=!1}if(t.completeStatus){if(o)throw new Error("Cannot update two requests at once");return o={action:d.c.END,bid_id:a.id,status:t.completeStatus},{asFormData:!0,method:"PUT",endpoint:`projects/0.1/projects/${a.projectId}`,payload:o}}if(o)return{asFormData:s,payload:o,endpoint:i,method:"PUT"};throw new Error("Cannot update for bids")}},O3cg:function(e,t,a){"use strict";a.d(t,"a",function(){return m});var i=a("9u4R"),o=a("tqRt"),r=a("OpNG"),d=a("cUs2"),s=a("inQW");function n(){return{defaultOrder:{field:"id",direction:r.a.ASC},fetch:(e,t,a,i)=>({endpoint:"projects/0.1/milestone_requests",params:{bids:Object(d.h)(a,"bidId"),projects:Object(d.h)(a,"projectId"),statuses:Object(d.h)(a,"status"),bidders:Object(d.h)(a,"bidderId"),milestone_requests:t}}),push:(e,t)=>{var a;return{endpoint:"projects/0.1/milestone_requests",payload:{project_id:t.projectId,bid_id:t.bidId,description:t.description,amount:t.amount,is_initial_payment:null!==(a=t.isInitialPayment)&&void 0!==a&&a}}},set:void 0,update:(e,t,a)=>{let i,o,r="PUT",d=!1,s=!1;if(a.projectId&&a.bidId&&t.description&&t.amount){if(i)throw new Error("Cannot update two requests at once");o="payment/onRequestMilestone.php",i={projectId:a.projectId,bidId:a.bidId,id:a.id,description:t.description,amount:t.amount},r="POST",d=!0,s=!0}if(t.action){if(i)throw new Error("Cannot update two requests at once");o=`projects/0.1/milestone_requests/${a.id}`,i={action:t.action},r="PUT"}if(void 0===i||void 0===o||void 0===d||void 0===s)throw new Error("Could not update due to missing field(s)");return{asFormData:s,payload:i,endpoint:o,method:r,isGaf:d}},remove:(e,t,a)=>({payload:{action:s.a.DELETE},endpoint:`projects/0.1/milestone_requests/${t}`,method:"PUT"})}}var c=a("f6cb"),u=a("ueDg"),p=a("e+HA");function l(e){if(!e.project_id)throw Error("Milestone request doesn't have a project ID.");if(!e.bidder_id||!e.bid_id||!e.amount)throw Error("Milestone request is missing a required field.");return{id:e.id||Math.random(),bidderId:e.bidder_id,bidId:e.bid_id,timeRequested:e.time_requested?1e3*e.time_requested:void 0,amount:e.amount,projectOwnerId:e.project_owner_id,projectId:e.project_id,description:e.description,currency:e.currency?Object(p.a)(e.currency):void 0,status:e.status,requesterId:e.requester_id,isInitialPayment:e.is_initial_payment}}function b(e){return{id:Object(c.r)(e.data.requestId),bidderId:Object(c.r)(e.data.sellerId),bidId:Object(c.r)(e.data.bidId),timeRequested:1e3*e.timestamp,amount:Object(c.r)(e.data.amount),projectOwnerId:Object(c.r)(e.data.accountId),projectId:Object(c.r)(e.data.id),description:e.data.description,currency:{code:e.data.currencyCode,id:Object(c.r)(e.data.currencyId),sign:e.data.currencySign},status:u.MilestoneRequestStatusApi.PENDING}}function j(e={},t){switch(t.type){case"API_FETCH_SUCCESS":if("milestoneRequests"===t.payload.type){const{result:a,ref:i,order:o}=t.payload;return Object(d.o)(e,Object(d.z)(a.milestone_requests,l),o,i)}return e;case"API_UPDATE_SUCCESS":if("milestoneRequests"===t.payload.type){const{delta:a,originalDocument:i,ref:o}=t.payload;return Object(d.A)(e,[i.id],e=>a.action===s.a.REJECT?Object(r.e)(e,Object.assign(Object.assign({},a),{status:u.MilestoneRequestStatusApi.REJECTED})):Object(r.e)(e,a),o)}return e;case"API_PUSH_SUCCESS":if("milestoneRequests"===t.payload.type){const{ref:a,result:i}=t.payload;return Object(d.q)(e,Object(d.z)([i],l),a)}return e;case"API_DELETE_SUCCESS":if("milestoneRequests"===t.payload.type){const{originalDocument:a,ref:i}=t.payload;return Object(d.u)(i,e,a.id)}return e;case"WS_MESSAGE":if("notifications"===t.payload.parent_type){const a={path:{collection:"milestoneRequests",authUid:t.payload.toUserId}};switch(t.payload.type){case"requestMilestone":return Object(d.b)(e,[t.payload],b,a);case"createMilestone":{const i=Object(c.r)(t.payload.data.created_milestone_request_id);return i?Object(d.A)(e,[i],e=>Object.assign(Object.assign({},e),{status:u.MilestoneRequestStatusApi.CREATED}),a):e}default:return e}}return e;default:return e}}var O=a("8Y7J");let m=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=O.Qb({type:e}),e.\u0275inj=O.Pb({imports:[[o.j.forFeature("milestoneRequests",j),i.d.forFeature("milestoneRequests",n)]]}),e})()},"UC/D":function(e,t,a){"use strict";a.d(t,"a",function(){return r}),a.d(t,"b",function(){return d});var i=a("f6cb"),o=a("e+HA");function r(e){if(!e.project_id)throw Error("Milestone request doesn't have a project ID.");if(!e.time_created)throw Error("Milestone request doesn't have a time created.");return{id:e.transaction_id||Math.random(),projectOwnerId:e.project_owner_id,bidderId:e.bidder_id,amount:e.amount,reason:e.reason,description:e.other_reason,projectId:e.project_id,bidId:e.bid_id,currency:e.currency?Object(o.a)(e.currency):void 0,isFromPrepaid:e.is_from_prepaid,status:e.status,disputeId:Object(i.r)(e.dispute_id),cancellationRequested:e.cancellation_requested,timeCreated:1e3*e.time_created,actionReason:e.cancellation_reason,actionReasonText:e.reason_text,timeReleased:e.time_released?1e3*e.time_released:void 0,isInitialPayment:e.is_initial_payment}}function d(e){if(!e.project_id)throw Error("Milestone doesn't have a project ID.");if(void 0===e.time_created)throw Error("Milestone doesn't have a time created.");return{id:e.transaction_id&&"number"==typeof e.transaction_id?Object(i.r)(e.transaction_id):Math.random(),projectOwnerId:Object(i.r)(e.project_owner_id),bidderId:Object(i.r)(e.bidder_id),amount:Object(i.r)(e.amount),reason:e.reason,description:e.other_reason,projectId:Object(i.r)(e.project_id),bidId:Object(i.r)(e.bid_id),currency:e.currency?Object(o.b)(e.currency):void 0,isFromPrepaid:e.is_from_prepaid,status:e.status,disputeId:Object(i.r)(e.dispute_id),timeCreated:"string"==typeof e.time_created?1e3*Object(i.r)(e.time_created):Date.now(),isInitialPayment:e.is_initial_payment}}},eI96:function(e,t,a){"use strict";a.d(t,"a",function(){return b});var i=a("9u4R"),o=a("tqRt"),r=a("OpNG"),d=a("cUs2"),s=a("f6cb"),n=a("ueDg");function c(){return{defaultOrder:{field:"timeCreated",direction:r.a.DESC},fetch:(e,t,a,i)=>({endpoint:"projects/0.1/milestones",params:{projects:Object(d.h)(a,"projectId"),bids:Object(d.h)(a,"bidId"),bidders:Object(d.h)(a,"bidderId"),statuses:Object(d.h)(a,"status"),milestones:t,project_owners:Object(d.h)(a,"projectOwnerId"),is_initial_payment:Object(d.h)(a,"isInitialPayment")[0]}}),push:(e,t,a)=>{if(void 0===(null==a?void 0:a.invoiceId)&&!t.description)throw new Error("Milestone description not provided on push");return{endpoint:"projects/0.1/milestones/",payload:{bidder_id:t.bidderId,amount:t.amount,project_id:t.projectId,description:t.description||"",request_id:a?Object(s.r)(a.requestId):void 0,invoice_id:a?Object(s.r)(a.invoiceId):void 0}}},set:void 0,update:(e,t,a)=>{const i=`projects/0.1/milestones/${a.id}/`;let o;if((a.status===n.MilestoneStatusApi.FROZEN||a.status===n.MilestoneStatusApi.REQUESTED_RELEASE)&&t.status===n.MilestoneStatusApi.CLEARED&&void 0!==t.amount){if(o)throw new Error("Cannot update two milestones at once, at release");o={action:"release",amount:t.amount}}if(a.status===n.MilestoneStatusApi.FROZEN&&t.status===n.MilestoneStatusApi.REQUESTED_RELEASE){if(o)throw new Error("Cannot update two milestones at once, at request release");o={action:"request_release"}}if((a.status===n.MilestoneStatusApi.FROZEN||a.status===n.MilestoneStatusApi.REQUESTED_RELEASE||a.status===n.MilestoneStatusApi.PENDING)&&t.status===n.MilestoneStatusApi.CANCELED){if(o)throw new Error("Cannot update two milestones at once, at cancel");o={action:"cancel"}}if(a.description!==t.description&&t.status!==n.MilestoneStatusApi.REQUESTED_RELEASE&&t.status!==n.MilestoneStatusApi.CLEARED){if(o)throw new Error("Cannot update two milestones at once, at update");o={action:"update",description:t.description}}if("request_cancel"===t.action&&t.actionReason&&(o={action:t.action,reason:t.actionReason,reason_text:"other"===t.actionReason?t.actionReasonText:""}),a.cancellationRequested&&!1===t.cancellationRequested){if(o)throw new Error("Cannot update two milestones at once, at reject cancel");o={action:"reject_cancel"}}if(void 0===o)throw new Error("Could not update due to missing payload");return{asFormData:!1,payload:o,endpoint:i,method:"PUT"}},remove:void 0}}var u=a("UC/D");function p(e={},t){switch(t.type){case"API_FETCH_SUCCESS":if("milestones"===t.payload.type){const{result:a,ref:i,order:o}=t.payload;return Object(d.o)(e,Object(d.z)(a.milestones,u.a),o,i)}return e;case"API_UPDATE_SUCCESS":if("milestones"===t.payload.type){const{delta:a,originalDocument:i,ref:o,result:s}=t.payload;if(a.status===n.MilestoneStatusApi.CLEARED){const t=s?s.remaining_milestone:void 0;if(t&&t.transaction_id){const a=Object(d.u)(o,e,i.id),r=s.released_milestone,n=Object(d.b)(a,[r],()=>Object(u.a)(Object.assign({},r)),o);return Object(d.b)(n,[t],()=>Object(u.a)(Object.assign({},t)),o)}return Object(d.A)(e,[i.id],e=>Object(r.e)(e,Object(u.a)(Object.assign({},s.original_milestone))),o)}return a.status===n.MilestoneStatusApi.CANCELED?Object(d.u)(o,e,i.id):Object(d.A)(e,[i.id],e=>Object(r.e)(e,a),o)}return e;case"API_PUSH_SUCCESS":if("milestones"===t.payload.type){const{result:a,ref:i}=t.payload;return Object(d.q)(e,Object(d.z)([a],u.a,i.path.authUid),i)}return e;case"WS_MESSAGE":{const a={path:{collection:"milestones",authUid:t.payload.toUserId}};if("notifications"===t.payload.parent_type)switch(t.payload.type){case"cancelMilestone":return Object(d.u)(a,e,Object(s.r)(t.payload.data.tranId));case"rejectMilestoneCancellation":return Object(d.A)(e,[t.payload.data.id],e=>Object.assign(Object.assign({},e),{cancellationRequested:!1,actionReason:void 0,actionReadonText:void 0,action:void 0}),a);case"createMilestone":{const{newMilestone:i}=t.payload.data;return Object(d.b)(e,[i],u.b,a)}case"accepted":{const{milestoneIds:i}=t.payload.data;return Object(d.A)(e,i,e=>Object.assign(Object.assign({},e),{status:n.MilestoneStatusApi.FROZEN}),a)}case"releaseMilestone":{const{milestoneId:i}=t.payload.data;return Object(d.A)(e,[Object(s.r)(i)],e=>Object.assign(Object.assign({},e),{status:n.MilestoneStatusApi.CLEARED}),a)}case"milestoneStatusUpdate":{const{milestoneId:i,milestoneStatus:o}=t.payload.data;return Object(d.A)(e,[Object(s.r)(i)],e=>Object.assign(Object.assign({},e),{status:o}),a)}case"requestCancelMilestone":{const{milestoneId:i,actionReason:o,actionReasonText:r}=t.payload.data;return Object(d.A)(e,[Object(s.r)(i)],e=>Object.assign(Object.assign({},e),{cancellationRequested:!0,actionReason:o,actionReasonText:r}),a)}case"requestToRelease":{const{tranId:i}=t.payload.data;return Object(d.A)(e,[Object(s.r)(i)],e=>Object.assign(Object.assign({},e),{status:n.MilestoneStatusApi.REQUESTED_RELEASE}),a)}case"generateAutomaticMilestone":return Object(d.b)(e,[t.payload.data],u.b,a);default:return e}return e}default:return e}}var l=a("8Y7J");let b=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=l.Qb({type:e}),e.\u0275inj=l.Pb({imports:[[o.j.forFeature("milestones",p),i.d.forFeature("milestones",c)]]}),e})()},inQW:function(e,t,a){"use strict";a.d(t,"a",function(){return i});var i=function(e){return e.ACCEPT="accept",e.DELETE="delete",e.REJECT="reject",e}({})},jZoe:function(e,t,a){"use strict";a.d(t,"a",function(){return b});var i=a("9u4R"),o=a("tqRt"),r=a("9a83"),d=a("cUs2"),s=a("OpNG"),n=a("f6cb"),c=a("ueDg"),u=a("9O23");function p(e={},t){switch(t.type){case"API_FETCH_SUCCESS":if("bids"===t.payload.type){const{result:a,ref:i,order:o}=t.payload;return Object(d.o)(e,Object(d.z)(a.bids,u.a),o,i)}return e;case"API_UPDATE_SUCCESS":if("projectViewBids"===t.payload.type||"bids"===t.payload.type){const{delta:a,originalDocument:i}=t.payload,o={path:{collection:"bids",authUid:t.payload.ref.path.authUid}};return Object(d.A)(e,[i.id],e=>Object(s.e)(e,a),o)}if("bidEditRequests"===t.payload.type){const{delta:a,result:i}=t.payload,o={path:{collection:"bids",authUid:t.payload.ref.path.authUid}};let r,s;return a.status===c.BidEditRequestStatusApi.ACCEPTED?(r=i.new_amount,s=i.new_period):(r=i.old_amount,s=i.old_period),Object(d.A)(e,[i.bid_id],e=>Object.assign(Object.assign({},e),{amount:r,period:s}),o)}return e;case"API_PUSH_SUCCESS":if("projectViewBids"===t.payload.type||"bids"===t.payload.type){const{result:a}=t.payload,i={path:{collection:"bids",authUid:t.payload.ref.path.authUid}};return Object(d.q)(e,Object(d.z)([a],u.a),i)}return e;case"WS_MESSAGE":{const a={path:{collection:"bids",authUid:t.payload.toUserId}};if("notifications"===t.payload.parent_type)switch(t.payload.type){case"bid":return Object(d.b)(e,[t.payload],u.c,a);case"bid_self":case"bid_updated":{const i=Object(n.r)(t.payload.data.id);return Object(d.A)(e,[i],e=>Object.assign(Object.assign({},e),{id:i,bidderId:Object(n.r)(t.payload.data.userId),projectId:Object(n.r)(t.payload.data.projectId),amount:Object(n.r)(t.payload.data.amount),period:Object(n.r)(t.payload.data.period),description:t.payload.data.bid.descr||"",score:Object(n.r)(t.payload.data.bid.score),submitDate:1e3*Object(n.r)(t.payload.data.time),timeSubmitted:1e3*Object(n.r)(t.payload.data.time)}),a)}case"bidretracted":return Object(d.u)(a,e,t.payload.data.bid_id);case"revoked":{const{apiMessage:i}=t.payload.data,{id:o}=i.bid;return Object(d.A)(e,[o],e=>Object.assign(Object.assign({},e),{id:o,bidderId:i.bid.bidder_id,projectId:i.project.id,awardStatus:i.bid.award_status}),a)}case"accepted":{const{apiMessage:i}=t.payload.data,{id:o}=i.bid;return Object(d.A)(e,[o],e=>Object.assign(Object.assign(Object.assign(Object.assign({},e),{id:o,bidderId:i.bid.bidder_id,projectId:i.project.id}),i.bid.amount?{amount:i.bid.amount}:{}),{retracted:t.payload.data.bid.retracted,period:i.bid.period,awardStatus:i.bid.award_status,sponsored:t.payload.data.bid.sponsored}),a)}case"denyed":{const{apiMessage:i}=t.payload.data,o=Object(n.r)(t.payload.data.bidId),r=c.BidAwardStatusApi.REJECTED;return Object(d.A)(e,[o],e=>Object.assign(Object.assign({},e),{id:Object(n.r)(t.payload.data.bidId),bidderId:i.bid.bidder_id,projectId:i.project.id,awardStatus:r}),a)}case"award":{const{apiMessage:i,acceptByTime:o}=t.payload.data,{id:r}=i.bid;return Object(d.A)(e,[r],e=>Object.assign(Object.assign({},e),{id:r,bidderId:i.bid.bidder_id,projectId:i.project.id,amount:i.bid.amount,period:i.bid.period,awardStatus:i.bid.award_status,awardExpireTime:o&&1e3*o}),a)}case"completed":{const{bidId:i}=t.payload.data;return i?Object(d.A)(e,[Object(n.r)(i)],e=>Object.assign(Object.assign({},e),{completeStatus:c.BidCompleteStatusApi.COMPLETE}),a):e}case"editAwardedBidAccepted":{const{bidID:i,newAmount:o,newPeriod:r}=t.payload.data.editBidDetails;return Object(d.A)(e,[Object(n.r)(i)],e=>Object.assign(Object.assign({},e),{amount:o,period:r}),a)}case"sponsor_bid":{const{id:i,sum:o}=t.payload.data.object.bid;return Object(d.A)(e,[Object(n.r)(i)],e=>Object.assign(Object.assign({},e),{sponsored:Object(n.r)(o)}),a)}default:return e}return e}default:return e}}var l=a("8Y7J");let b=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=l.Qb({type:e}),e.\u0275inj=l.Pb({imports:[[o.j.forFeature("bids",p),i.d.forFeature("bids",r.a)]]}),e})()}}]);
//# sourceMappingURL=default~app-app-shell-logged-in-routing-module~app-messaging-messaging-chat-groupchat-management-mod~c2460b3a-es2015.87066b38c79de45d6807.js.map